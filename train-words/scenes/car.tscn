[gd_scene load_steps=5 format=3]

[ext_resource type="Script" path="res://scripts/car.gd" id="1_script"]
[ext_resource type="Texture2D" path="res://assets/train_car.png" id="2_tex"]
[ext_resource type="Texture2D" path="res://assets/cargo_net_yellow_clean.png" id="3_net"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_detection"]
size = Vector2(200, 200)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_car_floor"]
size = Vector2(320, 80)

[node name="Car" type="Area2D"]
collision_layer = 4
collision_mask = 2
script = ExtResource("1_script")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("2_tex")
scale = Vector2(0.3, 0.3)

[node name="Frame" type="Polygon2D" parent="."]
# A solid Navy Blue frame background
color = Color(0.1, 0.1, 0.4, 1.0)
polygon = PackedVector2Array(-40, -60, 40, -60, 54, -54, 60, -40, 60, 40, 54, 54, 40, 60, -40, 60, -54, 54, -60, 40, -60, -40, -54, -54)
position = Vector2(0, 10)

[node name="OctagonMask" type="Polygon2D" parent="."]
# Restored to 2 (Draw + Clip) for proper masking
clip_children = 2
position = Vector2(0, 10)
# Approx Rounded Square (120x120, r=20)
polygon = PackedVector2Array(-40, -60, 40, -60, 54, -54, 60, -40, 60, 40, 54, 54, 40, 60, -40, 60, -54, 54, -60, 40, -60, -40, -54, -54)

[node name="Icon" type="Sprite2D" parent="OctagonMask"]
scale = Vector2(0.12, 0.12)

[node name="Label" type="Label" parent="."]
offset_left = -60.0
offset_top = -50.0
offset_right = 60.0
offset_bottom = 70.0
theme_override_colors/font_color = Color(1, 1, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 12
theme_override_font_sizes/font_size = 72
text = "A"
horizontal_alignment = 1
vertical_alignment = 1

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -40)
shape = SubResource("RectangleShape2D_detection")

[node name="StaticBody2D" type="StaticBody2D" parent="."]
# Physical floor
collision_layer = 1
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(0, 80)
shape = SubResource("RectangleShape2D_car_floor")

[node name="CargoNet" type="Polygon2D" parent="."]
visible = false
z_index = 10
texture = ExtResource("3_net")
texture_scale = Vector2(3, 3)
texture_repeat = 2
polygon = PackedVector2Array(-140, -105, 140, -105, 0, -325)
